// Test: Basic JSON parsing with match-based result
pod User {
    string name;
    int age;
    string email;
}

component JsonTest {
    mut string status = "Not started";
    mut User user;

    def parseJson() : void {
        string json = `{"name": "Alice", "age": 25, "email": "alice@example.com"}`;
        match (Json.parse(User, json)) {
            Success(User u, Meta meta) => {
                user = u;
                if (meta.has(User.name) && meta.has(User.age)) {
                    status = "Success: ${u.name}, ${u.age}";
                } else {
                    status = "Partial data received";
                }
            };
            Error(string error) => {
                status = "Error: " + error;
            };
        };
    }

    view {
        <div>
            <button onclick={parseJson}>Parse JSON</button>
            <p>Status: {status}</p>
            <p>Name: {user.name}</p>
            <p>Age: {user.age}</p>
        </div>
    }
}

app {
    root = JsonTest;
}
